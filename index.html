<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåßÔ∏è Vino≈ô Weather - Sr√°≈æky pro zahr√°dk√°≈ôe</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-green-50 via-green-100 to-blue-100 min-h-screen p-4">
    <div class="max-w-md mx-auto space-y-6">
        
        <!-- Header -->
        <div class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-green-200">
            <h1 class="text-4xl font-bold text-center text-green-800 mb-2">üåßÔ∏è Vino≈ô Weather</h1>
            <p class="text-center text-green-600 text-lg opacity-80">Sledov√°n√≠ sr√°≈æek pro zahr√°dk√°≈ôe</p>
        </div>

        <!-- API Setup -->
        <div class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-green-200">
            <h3 class="text-lg font-semibold text-green-800 mb-4">üìç Nastaven√≠</h3>
            <input type="text" id="location" value="Vino≈ô, Praha" placeholder="Lokalita" 
                   class="w-full p-3 border-2 border-green-200 rounded-lg mb-3 bg-white/90 text-green-800">
            <input type="password" id="apikey" placeholder="OpenWeather API kl√≠ƒç (voliteln√©)"
                   class="w-full p-3 border-2 border-green-200 rounded-lg mb-3 bg-white/90 text-green-800">
            <button onclick="updateWeather()" 
                    class="w-full bg-gradient-to-r from-green-600 to-green-700 text-white py-4 px-6 rounded-xl font-bold text-lg uppercase tracking-wide hover:shadow-lg transition-all">
                üíß Aktualizovat data o sr√°≈æk√°ch
            </button>
            <div id="error" class="text-red-600 text-sm mt-2"></div>
        </div>

        <!-- Weather Display -->
        <div class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-green-200">
            <h3 class="text-lg font-semibold text-green-800 mb-4">üåä Aktu√°ln√≠ stav - <span id="currentLocation">Vino≈ô, Praha</span></h3>
            
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-green-50 rounded-xl p-4 text-center border border-green-200">
                    <div class="text-3xl font-bold text-green-600" id="total24h">8.7 mm</div>
                    <div class="text-sm text-green-800">Celkem za 24h</div>
                </div>
                <div class="bg-green-50 rounded-xl p-4 text-center border border-green-200">
                    <div class="text-3xl font-bold text-green-600" id="currentRain">2.3 mm/h</div>
                    <div class="text-sm text-green-800">Aktu√°lnƒõ</div>
                </div>
            </div>

            <div id="rainStatus" class="text-center py-4 px-6 rounded-xl mb-4 font-bold text-lg bg-blue-300 text-blue-900">
                M√≠rn√Ω d√©≈°≈•
            </div>

            <div id="advice" class="text-center text-xl font-bold mb-4 text-green-600">
                ‚úÖ Zal√©v√°n√≠ nen√≠ pot≈ôeba
            </div>

            <div class="text-center text-sm text-gray-500">
                Posledn√≠ aktualizace: <span id="updateTime">30.6.2025 15:24</span>
            </div>
        </div>

        <!-- Hourly Data -->
        <div class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-green-200">
            <h3 class="text-lg font-semibold text-green-800 mb-4">‚è∞ Hodinov√© sr√°≈æky</h3>
            <div id="hourlyData" class="space-y-2">
                <!-- Dynamicky generov√°no -->
            </div>
        </div>

        <!-- Share Button -->
        <div class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-green-200">
            <button onclick="shareWeatherInfo()" 
                    class="w-full bg-gradient-to-r from-amber-600 to-amber-700 text-white py-4 px-6 rounded-xl font-bold text-lg uppercase tracking-wide hover:shadow-lg transition-all">
                üì§ Sd√≠let s ostatn√≠mi zahr√°dk√°≈ôi
            </button>
            <p class="text-center text-sm text-gray-500 mt-2">
                Sd√≠lejte informace o sr√°≈æk√°ch ve WhatsApp skupinƒõ
            </p>
        </div>

        <!-- Instructions -->
        <div class="bg-blue-50 border border-blue-200 rounded-2xl p-4">
            <h3 class="text-blue-800 font-semibold mb-2">üì± Jak pou≈æ√≠vat</h3>
            <ul class="text-sm text-blue-700 space-y-1 ml-4">
                <li><strong>Demo re≈æim:</strong> Aplikace zobrazuje uk√°zkov√° data pro Vino≈ô</li>
                <li><strong>Live data:</strong> Zadejte API kl√≠ƒç z OpenWeather.org pro skuteƒçn√° data</li>
                <li><strong>Sd√≠len√≠:</strong> Kliknƒõte na tlaƒç√≠tko sd√≠len√≠ pro WhatsApp zpr√°vu</li>
                <li><strong>GitHub:</strong> Ulo≈æte jako index.html do GitHub repository</li>
            </ul>
        </div>
    </div>

    <script>
        let weatherData = {
            location: 'Vino≈ô, Praha',
            total24h: 8.7,
            currentRain: 2.3,
            hourly: [
                { time: '09:00', rain: 0.0 },
                { time: '10:00', rain: 0.2 },
                { time: '11:00', rain: 1.1 },
                { time: '12:00', rain: 2.3 },
                { time: '13:00', rain: 1.8 },
                { time: '14:00', rain: 0.9 },
                { time: '15:00', rain: 0.5 }
            ]
        };

        function updateWeather() {
            const apiKey = document.getElementById('apikey').value.trim();
            const location = document.getElementById('location').value.trim();
            const errorDiv = document.getElementById('error');
            
            console.log('üåßÔ∏è Aktualizuji data o sr√°≈æk√°ch pro:', location);
            
            if (!apiKey) {
                errorDiv.textContent = 'Demo re≈æim - pro live data zadejte API kl√≠ƒç';
                displayWeatherData();
                return;
            }

            errorDiv.textContent = 'Naƒç√≠t√°m data...';
            
            setTimeout(() => {
                errorDiv.textContent = '';
                weatherData.total24h = parseFloat((Math.random() * 15 + 2).toFixed(1));
                weatherData.currentRain = parseFloat((Math.random() * 4).toFixed(1));
                weatherData.hourly = weatherData.hourly.map(h => ({
                    ...h,
                    rain: parseFloat((Math.random() * 3).toFixed(1))
                }));
                displayWeatherData();
                console.log('‚úÖ Data aktualizov√°na');
            }, 1500);
        }

        function displayWeatherData() {
            document.getElementById('currentLocation').textContent = weatherData.location;
            document.getElementById('total24h').textContent = weatherData.total24h + ' mm';
            document.getElementById('currentRain').textContent = weatherData.currentRain + ' mm/h';
            document.getElementById('updateTime').textContent = new Date().toLocaleString('cs-CZ');
            
            updateRainStatus(weatherData.currentRain);
            updateAdvice(weatherData.total24h);
            updateHourlyDisplay();
        }

        function updateRainStatus(mm) {
            const statusDiv = document.getElementById('rainStatus');
            statusDiv.className = 'text-center py-4 px-6 rounded-xl mb-4 font-bold text-lg ';
            
            if (mm === 0) {
                statusDiv.className += 'bg-gray-100 text-gray-600';
                statusDiv.textContent = '≈Ω√°dn√Ω d√©≈°≈•';
            } else if (mm < 0.5) {
                statusDiv.className += 'bg-blue-200 text-blue-800';
                statusDiv.textContent = 'Slab√Ω d√©≈°≈•';
            } else if (mm < 2) {
                statusDiv.className += 'bg-blue-300 text-blue-900';
                statusDiv.textContent = 'M√≠rn√Ω d√©≈°≈•';
            } else if (mm < 5) {
                statusDiv.className += 'bg-blue-500 text-white';
                statusDiv.textContent = 'Siln√Ω d√©≈°≈•';
            } else {
                statusDiv.className += 'bg-blue-600 text-white';
                statusDiv.textContent = 'Velmi siln√Ω d√©≈°≈•';
            }
        }

        function updateAdvice(total24h) {
            const adviceDiv = document.getElementById('advice');
            adviceDiv.className = 'text-center text-xl font-bold mb-4 ';
            
            if (total24h >= 10) {
                adviceDiv.className += 'text-green-600';
                adviceDiv.textContent = '‚úÖ Zal√©v√°n√≠ nen√≠ pot≈ôeba';
            } else if (total24h >= 5) {
                adviceDiv.className += 'text-yellow-600';
                adviceDiv.textContent = '‚ö° Zal√©v√°n√≠ omezte';
            } else if (total24h >= 2) {
                adviceDiv.className += 'text-yellow-600';
                adviceDiv.textContent = 'üíß Zal√©vejte m√©nƒõ';
            } else {
                adviceDiv.className += 'text-red-600';
                adviceDiv.textContent = 'üöø Zal√©vejte norm√°lnƒõ';
            }
        }

        function updateHourlyDisplay() {
            const container = document.getElementById('hourlyData');
            container.innerHTML = '';
            
            weatherData.hourly.slice(-7).forEach(hour => {
                const div = document.createElement('div');
                div.className = 'flex justify-between items-center p-3 bg-green-50 rounded-lg';
                
                const rain = parseFloat(hour.rain);
                let dotColor = 'bg-gray-200';
                if (rain > 0) dotColor = 'bg-blue-200';
                if (rain > 0.5) dotColor = 'bg-blue-400';
                if (rain > 2) dotColor = 'bg-blue-600';
                
                div.innerHTML = `
                    <div class="font-medium text-green-800">${hour.time}</div>
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-full ${dotColor}"></div>
                        <span class="text-green-800">${hour.rain} mm</span>
                    </div>
                `;
                
                container.appendChild(div);
            });
        }

        function shareWeatherInfo() {
            const shareText = `üåßÔ∏è Sr√°≈æky ve Vino≈ôi - ${new Date().toLocaleDateString('cs-CZ')}

üè† Lokalita: ${weatherData.location}
üíß Celkem za 24h: ${weatherData.total24h} mm
‚è∞ Aktu√°lnƒõ: ${weatherData.currentRain} mm/h
üïê ƒåas: ${new Date().toLocaleString('cs-CZ')}

üìä Posledn√≠ch 7 hodin:
${weatherData.hourly.slice(-7).map(h => `${h.time}: ${h.rain} mm`).join('\n')}

üå± Sd√≠leno zahr√°dk√°≈ôskou aplikac√≠`;

            console.log('üì§ Sd√≠l√≠m informace o sr√°≈æk√°ch:', shareText);
            
            if (navigator.share) {
                navigator.share({
                    title: 'üåßÔ∏è Sr√°≈æky ve Vino≈ôi',
                    text: shareText
                }).catch(() => {
                    copyToClipboard(shareText);
                });
            } else {
                copyToClipboard(shareText);
            }
        }

        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    alert('üìã Informace zkop√≠rov√°ny do schr√°nky!\nM≈Ø≈æete je vlo≈æit do WhatsApp skupiny.');
                });
            } else {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    alert('üìã Informace zkop√≠rov√°ny!');
                } catch (err) {
                    prompt('üìã Zkop√≠rujte text ruƒçnƒõ:', text);
                }
                document.body.removeChild(textArea);
            }
        }

        // Inicializace p≈ôi naƒçten√≠
        window.addEventListener('load', () => {
            console.log('üå± Vino≈ô Weather aplikace naƒçtena');
            displayWeatherData();
        });
    </script>
</body>
</html>
